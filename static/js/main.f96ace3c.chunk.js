(this["webpackJsonpevent-listing"]=this["webpackJsonpevent-listing"]||[]).push([[0],[,,,,,,,,function(e,t,s){},,function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){},function(e,t,s){"use strict";s.r(t);var a=s(3),r=s.n(a),i=s(1),n=s.n(i);const c=200;class l{constructor(e){this.getNamespace=void 0,this.getNamespace=()=>e}static isAvailable(){const e=Date.now().toString();try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch{return!1}}get(){try{const e=localStorage.getItem(this.getNamespace());return"string"===typeof e?JSON.parse(e):null}catch{return null}}set(e){try{return localStorage.setItem(this.getNamespace(),JSON.stringify(e)),!0}catch{return!1}}}const o={January:"01",February:"02",March:"03",April:"04",May:"05",June:"06",July:"07",August:"08",September:"09",October:"10",November:"11",December:"12"};s(8);var d=s(0);class h extends n.a.Component{render(){return Object(d.jsx)("h1",{className:"title",children:this.props.title})}}s(10);class p extends n.a.Component{render(){return Object(d.jsxs)("div",{className:"select",children:[Object(d.jsx)("select",{className:"select__element",id:this.props.id,name:this.props.id,value:this.props.value,"aria-label":this.props.title,onChange:this.props.onChange,children:this.props.options.map((e=>Object(d.jsx)("option",{className:"select__option",value:e.value,children:e.title},e.value)))}),Object(d.jsx)("svg",{className:"select__icon",width:"14",height:"8",viewBox:"0 0 14 8",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",children:Object(d.jsx)("path",{d:"m1 1 6 6 6-6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]})}}s(11);class u extends n.a.Component{render(){return Object(d.jsxs)("div",{className:"filter",children:[Object(d.jsxs)("label",{className:"filter__title",htmlFor:this.props.id,children:[this.props.title,":"]}),Object(d.jsx)("div",{className:"filter__select",children:Object(d.jsx)(p,{id:this.props.id,value:this.props.value,title:this.props.title,options:this.props.options,onChange:this.props.onFilterChange})})]})}}s(12);class m extends n.a.Component{render(){return Object(d.jsx)("form",{className:"filters",id:"filters",name:"filters",children:this.props.filters.map((e=>Object(d.jsx)("div",{className:"filters__filter",children:Object(d.jsx)(u,{...e})},e.id)))})}}s(13);const j="All",v=l.isAvailable()?new l("filtersValues"):null;class b extends n.a.Component{constructor(e){var t;super(e),this.handleFilterChange=(e,t)=>{this.setState((s=>({filters:s.filters.map((s=>s.id===e?{...s,value:t}:s))})),(()=>{const e=this.getFiltersValues();this.props.onFiltersChanges(e),null===v||void 0===v||v.set(e)}))};const[s=[]]=function(e,t,s=[]){const a=Array.from({length:t.length},(()=>new Set));return e.forEach((e=>{t.forEach(((t,r)=>{var i;const n=e[t],c=s[r];null===(i=a[r])||void 0===i||i.add(c instanceof Function?c(n):n)}))})),a.map((e=>Array.from(e).sort(((e,t)=>e>t?1:e<t?-1:0))))}(this.props.events,["city"]),a=null!==(t=null===v||void 0===v?void 0:v.get())&&void 0!==t?t:{};this.state={filters:[{id:"city",title:"City",options:s.map((e=>({value:e,title:e})))},{id:"month",title:"Month",options:Object.keys(o).map((e=>({value:e,title:e})))},{id:"favorites",title:"Favorites",options:[{value:"Marked",title:"Marked"},{value:"Unmarked",title:"Unmarked"}]}].map((e=>{var t;return{...e,options:[{value:j,title:"All"},...e.options],value:null!==(t=a[e.id])&&void 0!==t?t:j,onFilterChange:t=>{this.handleFilterChange(e.id,t.target.value)}}}))},this.props.onFiltersChanges(a)}getFiltersValues(){const e={};return this.state.filters.forEach((t=>{t.value!==j&&(e[t.id]=t.value)})),e}render(){return Object(d.jsxs)("header",{className:"header",children:[Object(d.jsx)("div",{className:"header__title",children:Object(d.jsx)(h,{title:"Event Listing"})}),Object(d.jsx)("div",{className:"header__filters",children:Object(d.jsx)(m,{filters:this.state.filters})})]})}}const g=new Map;function f(e){const t=g.get(e);if(void 0!==t)return t;const[s="",a="",r=""]=e.split("."),i={day:s,month:a,year:r};return g.set(e,i),i}s(14);class x extends n.a.Component{render(){return Object(d.jsxs)("div",{className:"mark",children:[Object(d.jsx)("input",{className:"mark__element",id:this.props.id,name:this.props.id,type:"checkbox",checked:this.props.isMarked,"aria-label":this.props.title,title:this.props.title,onChange:this.props.onChange}),Object(d.jsx)("svg",{className:"mark__icon",width:"16",height:"20",viewBox:"0 0 16 20",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",children:Object(d.jsx)("path",{d:"m15 19-7-5-7 5V3a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]})}}s(15);class O extends n.a.Component{render(){const{day:e,month:t,year:s}=this.props.date;return Object(d.jsx)("article",{className:"card",id:this.props.id,style:{backgroundImage:'url("'.concat(this.props.image,'")')},children:Object(d.jsxs)("div",{className:"card__overlay",children:[Object(d.jsx)("h2",{className:"card__title",title:this.props.title,children:this.props.title}),Object(d.jsx)("time",{className:"card__date",dateTime:"".concat(s,"-").concat(t,"-").concat(e),"aria-label":"".concat(e,".").concat(t,".").concat(s),title:"".concat(e,".").concat(t,".").concat(s),children:Object(d.jsx)("span",{"aria-hidden":"true",children:e})}),Object(d.jsx)("div",{className:"card__mark",children:Object(d.jsx)(x,{id:"mark-for-".concat(this.props.id),title:this.props.isMarked?"Remove from favorites":"Add to favorites",isMarked:this.props.isMarked,onChange:this.props.onMarkChange})})]})})}}s(16);class k extends n.a.Component{render(){return 0===this.props.cards.length?Object(d.jsx)("div",{className:"cards",children:Object(d.jsx)("p",{className:"cards__message",children:"No events"})}):Object(d.jsx)("ul",{className:"cards",children:this.props.cards.map((e=>Object(d.jsx)("li",{className:"cards__card",children:Object(d.jsx)(O,{...e})},e.id)))})}}const N=l.isAvailable()?new l("markedCards"):null;class _ extends n.a.Component{constructor(e){var t;super(e),this.handleMarkChange=e=>{this.setState((t=>({cards:t.cards.map((t=>t.id===e?{...t,isMarked:!t.isMarked}:t))})),(()=>{null===N||void 0===N||N.set(this.getMarkedCards())}))};const s=null!==(t=null===N||void 0===N?void 0:N.get())&&void 0!==t?t:{};this.state={cards:this.props.events.map((e=>({id:e.id,title:e.name,date:f(e.date),city:e.city,image:e.image,isMarked:Boolean(s[e.id]),onMarkChange:()=>{this.handleMarkChange(e.id)}})))}}getMarkedCards(){const e={};return this.state.cards.forEach((t=>{!0===t.isMarked&&(e[t.id]=t.isMarked)})),e}render(){return Object(d.jsx)("main",{className:"main",children:Object(d.jsx)("div",{className:"main__cards",children:Object(d.jsx)(k,{cards:this.state.cards.filter(this.props.cardsFilter)})})})}}s(17);class C extends n.a.Component{constructor(...e){super(...e),this.state={filtersValues:{}}}render(){return Object(d.jsxs)("div",{className:"app",children:[Object(d.jsx)("div",{className:"app__header",children:Object(d.jsx)(b,{events:this.props.events,onFiltersChanges:e=>{this.setState({filtersValues:e})}})}),Object(d.jsx)("div",{className:"app__main",children:Object(d.jsx)(_,{events:this.props.events,cardsFilter:e=>{const{city:t,month:s,favorites:a}=this.state.filtersValues;return!(void 0!==t&&t!==e.city||void 0!==s&&o[s]!==e.date.month||void 0!==a&&("Marked"===a||!("Unmarked"===a))!==e.isMarked)}})})]})}}s(18);!async function(){try{const e=await class{static async getEvents(){return async function(e,t){const s=await fetch(e,t);if(s.status!==c){const e=await s.text();throw new Error(e)}return s.json()}("/event-listing/data/events.json")}}.getEvents();r.a.render(Object(d.jsx)(n.a.StrictMode,{children:Object(d.jsx)(C,{events:e})}),document.getElementById("root"))}catch(e){console.error(e)}}()}],[[19,1,2]]]);
//# sourceMappingURL=main.f96ace3c.chunk.js.map